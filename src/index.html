<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Experiments</title>
    <link href="css/style.scss" rel="stylesheet" />
</head>
<body>
<iframe src="blank.html" name="target" class="frame"></iframe>
<aside class="list">
    <a href="/road.html" target="target" data-description="W.I.P road placement system. Will be implemented in Cities: United game when complete">Road</a>
</aside>

<script>
    const $frame = document.querySelector(".frame");
    const $title = document.querySelector("title");

    // make the links also go into the url
    for (const $el of Array.from(document.querySelectorAll("a"))) {
        if (!$el.href) continue;
        if ($el.target !== "target") continue;

        $el.addEventListener("click", e => {
            location.hash = $el.getAttribute("href");
            e.preventDefault();
        });
    }

    onhashchange = () => {
        for (const el of document.querySelectorAll("a[data-description]")) {
            el.classList.remove("description-visible");
        }

        const hash = location.hash.substr(1);
        const target = hash && document.querySelector(`a[href="${hash}"]`);
        if (target) {
            $frame.contentWindow.location.replace(hash);
            $title.textContent = `${target.textContent} | Experiments`;
            target.classList.add("description-visible");
        } else {
            $title.textContent = "Experiments";
            $frame.contentWindow.location.replace("/blank.html");
        }
    };
    onhashchange();
</script>
</body>
</html>
